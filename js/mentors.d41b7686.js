(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mentors"],{"18eb":function(e,t,a){},"1c07":function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),r=Object(n["M"])("data-v-44f9c770");Object(n["u"])("data-v-44f9c770");var o={class:"Mentors page"},i={class:"container"},s={class:"card"},l=Object(n["i"])("div",{class:"Mentors__header"},[Object(n["i"])("h2",null,"Mentors list")],-1),c={class:"Mentors__options"},u=Object(n["i"])("i",{class:"fas fa-user-plus"},null,-1),d=Object(n["h"])(" Add mentor "),m={class:"Mentors__content"},h={class:"Mentors__contentHeader"},f={key:0,class:"noResults"},b={key:0},p={key:1},y={class:"noResults"},O={key:0};Object(n["s"])();var j=r((function(e,t,a,j,v,M){var k=Object(n["z"])("Navbar"),S=Object(n["z"])("loader"),_=Object(n["z"])("Avatar"),g=Object(n["z"])("Table"),C=Object(n["z"])("Confirm"),w=Object(n["z"])("mentor-form"),q=Object(n["z"])("Modal"),L=Object(n["z"])("Toast");return Object(n["r"])(),Object(n["e"])("div",o,[Object(n["i"])(k),Object(n["i"])("div",i,["loading"==v.state?(Object(n["r"])(),Object(n["e"])(S,{key:0})):Object(n["f"])("",!0),Object(n["i"])("div",s,[l,Object(n["i"])("div",c,[Object(n["i"])("button",{class:"btn-standard btn-default-medium btn-gradient-dark",onClick:t[1]||(t[1]=function(){return M.openModal("addMentor",{})})},[u,d])]),Object(n["i"])("div",m,[Object(n["i"])("h3",h,[v.mentors.length||"loading"===v.state?Object(n["f"])("",!0):(Object(n["r"])(),Object(n["e"])("span",f," No mentors yet "))]),v.mentors.length?(Object(n["r"])(),Object(n["e"])(g,{key:0,headings:v.headings,data:M.filteredMentors,"is-row-sortable":"","is-row-searchable":"",queries:v.queries,actions:v.rowActions,"sort-by":v.sortBy,"onUpdate:sort-by":t[2]||(t[2]=function(e){return v.sortBy=e})},{cell:r((function(e){var t=e.data,a=e.heading;return["avatar"==v.headings[a].key?(Object(n["r"])(),Object(n["e"])("span",b,[Object(n["i"])(_,{user:t,isBordered:""},null,8,["user"])])):(Object(n["r"])(),Object(n["e"])("span",p,Object(n["B"])(t[v.headings[a].key]),1))]})),_:1},8,["headings","data","queries","actions","sort-by"])):Object(n["f"])("",!0),Object(n["i"])("div",y,[v.mentors.length&&0==M.filteredMentors.length&&"loading"!==v.state?(Object(n["r"])(),Object(n["e"])("h4",O," No search results. Change search query and try again ")):Object(n["f"])("",!0)]),"hidden"!=v.modalState?(Object(n["r"])(),Object(n["e"])(q,{key:1,onClose:M.closeModal},Object(n["g"])({header:r((function(){return[Object(n["h"])(Object(n["B"])(M.modalTitle),1)]})),_:2},["loading"==v.modalState?{name:"loader",fn:r((function(){return[Object(n["i"])(S,{class:"sectionOnly"})]}))}:void 0,"removeMentor"===v.activeModal.name?{name:"content",fn:r((function(){return[Object(n["i"])(C,{"confirm-question":"Do you really want to delete mentor: ".concat(v.selectedMentor.fullname," ?"),"button-text":"Yes",onAccept:t[3]||(t[3]=function(e){return M.deleteMentor(v.selectedMentor.id)}),onClose:t[4]||(t[4]=function(e){return v.modalState="hidden"})},null,8,["confirm-question"])]}))}:"addMentor"===v.activeModal.name?{name:"content",fn:r((function(){return[Object(n["i"])(w,{"initial-values":v.selectedMentor,onClose:M.closeModal,onSubmit:t[5]||(t[5]=function(e){return M.addMentor(e)})},null,8,["initial-values","onClose"])]}))}:void 0]),1032,["onClose"])):Object(n["f"])("",!0),"removed"==v.toastState?(Object(n["r"])(),Object(n["e"])(L,{key:2,title:"Mentor has been removed !",onClose:t[6]||(t[6]=function(e){return v.toastState="hidden"})})):Object(n["f"])("",!0),"created"==v.toastState?(Object(n["r"])(),Object(n["e"])(L,{key:3,title:"Mentor has been created successfully at "+v.updateDate,onClose:t[7]||(t[7]=function(e){return v.toastState="hidden"})},null,8,["title"])):Object(n["f"])("",!0),"error"==v.toastState?(Object(n["r"])(),Object(n["e"])(L,{key:4,error:"",title:"Something went wrong! Please try again",onClose:t[8]||(t[8]=function(e){return v.toastState="hidden"})})):Object(n["f"])("",!0),"errorMessage"==v.toastState?(Object(n["r"])(),Object(n["e"])(L,{key:5,error:"",title:v.error.error,onClose:t[9]||(t[9]=function(e){return v.toastState="hidden"})},null,8,["title"])):Object(n["f"])("",!0)])])])])})),v=(a("4de4"),a("7db0"),a("c975"),a("d81d"),a("fb6a"),a("d3b7"),a("25f0"),a("498a"),a("5530")),M=a("31d1"),k=a("8d08"),S=a("a820"),_=a("5f07"),g=a("a82e"),C=a("3405"),w=a("eda7"),q=Object(n["i"])("div",{class:"Mentors__formInfo"},"* required field",-1),L={class:"Mentors__formBtns"};function x(e,t,a,r,o,i){var s=Object(n["z"])("text-field");return Object(n["r"])(),Object(n["e"])("form",{class:"Mentors__form",onSubmit:t[10]||(t[10]=Object(n["L"])((function(e){return i.submitForm()}),["prevent"]))},[Object(n["i"])("div",null,[Object(n["i"])(s,{value:o.firstName,"onUpdate:value":t[1]||(t[1]=function(e){return o.firstName=e}),name:o.firstName,label:"Name *",class:{error:o.error}},null,8,["value","name","class"]),Object(n["i"])(s,{value:o.lastName,"onUpdate:value":t[2]||(t[2]=function(e){return o.lastName=e}),name:o.lastName,label:"LastName *",class:{error:o.error}},null,8,["value","name","class"]),Object(n["i"])(s,{value:o.email,"onUpdate:value":t[3]||(t[3]=function(e){return o.email=e}),name:o.email,label:"Email *",error:i.isFieldFilled(o.email)&&!i.emailValid(o.email),errorMessage:"Invalid email",class:{error:o.error||i.isFieldFilled(o.email)&&!i.emailValid(o.email)}},null,8,["value","name","error","class"]),Object(n["i"])(s,{value:o.phone,"onUpdate:value":t[4]||(t[4]=function(e){return o.phone=e}),valueModifiers:{number:!0},name:o.phone,label:"Phone",type:"number",placeholder:"eg.111111111",min:0,error:i.isFieldFilled(o.phone)&&!i.phoneValid(o.phone),class:{error:o.error||i.isFieldFilled(o.phone)&&!i.phoneValid(o.phone)},errorMessage:"Invalid phone"},null,8,["value","name","error","class"]),Object(n["i"])(s,{value:o.company,"onUpdate:value":t[5]||(t[5]=function(e){return o.company=e}),name:o.company,label:"Company *",class:{error:o.error}},null,8,["value","name","class"]),Object(n["i"])(s,{value:o.aboutMe,"onUpdate:value":t[6]||(t[6]=function(e){return o.aboutMe=e}),name:o.aboutMe,label:"About me",fieldType:"textarea",class:["wide",{error:o.error}]},null,8,["value","name","class"]),Object(n["i"])(s,{value:o.photo,"onUpdate:value":t[7]||(t[7]=function(e){return o.photo=e}),name:o.photo,label:"Photo url",class:{error:o.error}},null,8,["value","name","class"]),q]),Object(n["i"])("div",L,[Object(n["i"])("button",{type:"button",class:"btn-default-medium btn-standard btn-secondary",onClick:t[8]||(t[8]=function(t){return e.$emit("close")})}," Cancel "),Object(n["i"])("button",{disabled:!i.formValid,class:"btn-default-medium btn-standard btn-primary-dark",onClick:t[9]||(t[9]=Object(n["L"])((function(){return i.submitForm.apply(i,arguments)}),["prevent"]))}," Create ",8,["disabled"])])],32)}a("4160"),a("b64b"),a("159b");var F=a("4aa6"),N=a("0deb"),T=a("517f"),B={name:"MentorForm",components:{TextField:N["a"]},props:{readOnly:{type:Boolean,default:!1}},emits:["close","submit"],data:function(){return{firstName:"",lastName:"",email:"",phone:"",company:"",aboutMe:"",photo:"",state:"form",error:null,isEmpty:F["a"]}},computed:{formValid:function(){return Boolean(this.firstName&&this.lastName&&this.email&&this.company&&this.emailChecked&&(!this.isFieldFilled(this.phone)||this.isFieldFilled(this.phone)&&this.phoneValid(this.phone)))},emailChecked:function(){return this.emailValid(this.email)},phoneChecked:function(){return this.phoneValid(this.phone)}},methods:{isFieldFilled:function(e){return Boolean(void 0!==e&&!Object(F["a"])(e))},emailValid:function(e){return Boolean(Object(T["a"])(e))},phoneValid:function(e){return Boolean(Object(T["b"])(e))},submitForm:function(){var e={first_name:this.firstName,last_name:this.lastName,email:this.email,phone:this.phone,company:this.company,aboutMe:this.aboutMe,photo:this.photo};Object.keys(e).forEach((function(t){return""===e[t]&&delete e[t]})),this.$emit("submit",e)}}};a("6f2e");B.render=x;var R=B,A=a("cd07"),V=a("b166"),z={name:"Mentors",components:{Navbar:M["a"],Loader:k["a"],Table:S["a"],Avatar:_["a"],Modal:g["a"],Confirm:C["a"],Toast:w["a"],MentorForm:R},data:function(){var e=this;return{state:null,error:null,modalState:"hidden",mentors:[],queryName:"",querySurname:"",queryFullname:"",queryEmail:"",queryPhone:"",queryCompany:"",selectedMentor:{},activeModal:{},toastState:"hidden",updateDate:Object(V["a"])(new Date,"dd LLLL yyyy"),headings:[{key:"avatar",name:"Photo",isRowSortable:!1},{key:"id",name:"Id",isRowSortable:!0},{key:"first_name",name:"Name",isRowSortable:!0},{key:"last_name",name:"Surname",isRowSortable:!0},{key:"fullname",name:"Fullname",isRowSortable:!0},{key:"email",name:"Email",isRowSortable:!0},{key:"phone",name:"Phone",isRowSortable:!0},{key:"company",name:"Company",isRowSortable:!0},{key:"actions",name:"Actions",isRowSortable:!1}],sortBy:{key:"id",direction:"asc"},rowActions:[{name:"edit",icon:"fas fa-edit",tooltip:"More",fn:function(t){return e.$router.push("/mentors/".concat(t.id))}},{name:"delete",icon:"far fa-trash-alt",class:"btn-secondary-dark",fn:function(t){return e.openModal("removeMentor",t)}}],queries:[{key:"avatar",searchable:!1},{key:"id",searchable:!1},{key:"first_name",searchText:this.queryName,placeholder:"search name",searchable:!0},{key:"last_name",searchText:this.querySurname,placeholder:"search surname",searchable:!0},{key:"fullname",searchText:this.queryFullname,placeholder:"search fullname",searchable:!0},{key:"email",searchText:this.queryEmail,placeholder:"search email",searchable:!0},{key:"phone",searchText:this.queryPhone,placeholder:"search phone no",searchable:!0},{key:"company",searchText:this.queryCompany,placeholder:"search company",searchable:!0},{key:"actions",searchable:!1}]}},computed:{sortedMentors:function(){var e=this,t=this.mentors.slice().sort((function(t,a){switch(e.sortBy.key){case"id":return t.id-a.id;case"first_name":return t.first_name.trim().localeCompare(a.first_name.trim());case"last_name":return t.last_name.trim().localeCompare(a.last_name.trim());case"fullname":return t.fullname.trim().localeCompare(a.fullname.trim());case"email":return t.email.localeCompare(a.email);case"phone":return t.phone-a.phone;case"company":return t.company.trim().localeCompare(a.company.trim());default:return 0}}));return"asc"==this.sortBy.direction?t:"desc"==this.sortBy.direction?t.slice().reverse():this.mentors},filteredMentors:function(){var e,t=this.queries.find((function(e){return"first_name"==e.key})).searchText||"",a=this.queries.find((function(e){return"last_name"==e.key})).searchText||"",n=this.queries.find((function(e){return"fullname"==e.key})).searchText||"",r=this.queries.find((function(e){return"email"==e.key})).searchText||"",o=this.queries.find((function(e){return"phone"==e.key})).searchText||"",i=this.queries.find((function(e){return"company"==e.key})).searchText||"",s=t||a||n||r||o||i;return e=s?this.sortedMentors.filter((function(e){return e.first_name&&-1!==e.first_name.toLowerCase().indexOf(t.toLowerCase())})).filter((function(e){return e.last_name&&-1!==e.last_name.toLowerCase().indexOf(a.toLowerCase())})).filter((function(e){return e.fullname&&-1!==e.fullname.toLowerCase().indexOf(n.toLowerCase())})).filter((function(e){return e.email&&-1!==e.email.toLowerCase().indexOf(r.toLowerCase())})).filter((function(e){return e.phone&&-1!==e.phone.indexOf(o)})).filter((function(e){return e.company&&-1!==e.company.toLowerCase().indexOf(i.toLowerCase())})):this.sortedMentors,e},modalTitle:function(){switch(this.activeModal.name){case"addMentor":return"Add mentor";case"removeMentor":return"Delete mentor";default:return""}}},mounted:function(){this.getMentors()},methods:{getMentors:function(){var e=this;return this.state="loading",Object(A["c"])().then((function(t){var a=t.data.ad||{};e.mentors=t.data.data.map((function(e){return Object(v["a"])(Object(v["a"])({},e),{},{company:a.company||"LEARN - Learning with us co",companyUrl:a.url,aboutMe:a.text,phone:Math.floor(1e8+9e8*Math.random()).toString(),fullname:e.first_name+" "+e.last_name})})),e.state="loaded"})).catch((function(t){e.state="error",console.log("error",t)}))},closeModal:function(){this.modalState="hidden"},openModal:function(e,t){this.modalState="visible",this.activeModal={name:e,mentor:t},this.selectedMentor=t},deleteMentor:function(){var e=this;this.modalState="loading",Object(A["d"])(this.selectedMentor.id).then((function(){e.modalState="hidden",e.toastState="removed",e.mentors=e.mentors.filter((function(t){return t.id!==e.selectedMentor.id}))})).catch((function(t){e.error=t,e.modalState="hidden",e.error.error?e.toastState="errorMessage":e.toastState="error"}))},addMentor:function(e){var t=this;this.modalState="loading",Object(A["a"])(e).then((function(a){var n=a.data,r=n.id,o=n.createdAt,i=Object(v["a"])(Object(v["a"])({},e),{},{id:r,fullname:e.first_name+" "+e.last_name});t.updateDate=Object(V["a"])(new Date(o),"dd LLLL yyyy HH:mm"),t.modalState="hidden",t.toastState="created",t.mentors.push(i)})).catch((function(e){t.error=e,t.modalState="hidden",t.error.error?t.toastState="errorMessage":t.toastState="error"}))}}};a("bf0a");z.render=j,z.__scopeId="data-v-44f9c770";t["default"]=z},"6f2e":function(e,t,a){"use strict";a("c5f1")},bf0a:function(e,t,a){"use strict";a("18eb")},c5f1:function(e,t,a){},cd07:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return c}));var n=a("bc3a"),r=a.n(n),o=function(){return r.a.get("https://reqres.in/api/users")},i=function(e){return r.a.get("https://reqres.in/api/users/".concat(e))},s=function(e){return r.a.delete("https://reqres.in/api/users/".concat(e))},l=function(e,t){return r.a.put("https://reqres.in/api/users/".concat(e),{data:t})},c=function(e){return r.a.post("https://reqres.in/api/users/",{data:e})}}}]);
//# sourceMappingURL=mentors.d41b7686.js.map