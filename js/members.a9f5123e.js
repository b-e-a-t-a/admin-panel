(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["members"],{"48be":function(e,t,a){},"911c":function(e,t,a){},b75d:function(e,t,a){"use strict";a("911c")},d734:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=a("7a23"),n=Object(r["M"])("data-v-2449f703");Object(r["u"])("data-v-2449f703");var s={class:"Members page"},i={class:"container"},o={class:"card"},l=Object(r["i"])("div",{class:"Members__header"},[Object(r["i"])("h2",null,"Members list")],-1),c={class:"Members__paginationInfo perPage"},u={class:"Members__customSelect"},d=Object(r["i"])("label",{for:"results-select"},"Results per page",-1),m={class:"Members__paginationInfo"},b={class:"Members__options"},h=Object(r["i"])("i",{class:"fas fa-user-plus"},null,-1),f=Object(r["h"])(" Add member "),O={class:"Members__content"},g={class:"Members__contentHeader"},j={key:0,class:"noResults"},p={key:0},y={key:1},v={key:2},M={class:"noResults"},P={key:0},k={class:"Members__paginationButtons"},w=Object(r["i"])("i",{class:"fas fa-angle-left"},null,-1),S={class:"bolded"},C={class:"pageBtn activePage"},B={class:"bolded"},T=Object(r["i"])("span",null,null,-1),_=Object(r["i"])("i",{class:"fas fa-angle-right"},null,-1),q={class:"bolded"};Object(r["s"])();var N=n((function(e,t,a,N,x,R){var F=Object(r["z"])("Navbar"),L=Object(r["z"])("loader"),A=Object(r["z"])("Avatar"),D=Object(r["z"])("Table"),V=Object(r["z"])("Confirm"),I=Object(r["z"])("member-form"),U=Object(r["z"])("Modal"),z=Object(r["z"])("Toast");return Object(r["r"])(),Object(r["e"])("div",s,[Object(r["i"])(F),Object(r["i"])("div",i,["loading"==x.state?(Object(r["r"])(),Object(r["e"])(L,{key:0})):Object(r["f"])("",!0),Object(r["i"])("div",o,[l,Object(r["i"])("div",c,[Object(r["i"])("div",u,[d,Object(r["J"])(Object(r["i"])("select",{id:"results-select",name:"results","onUpdate:modelValue":t[1]||(t[1]=function(e){return x.selectedResultsPerPage=e})},[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(x.itemsPerPage,(function(e,t){return Object(r["r"])(),Object(r["e"])("option",{key:"item-"+t},Object(r["B"])(e),1)})),128))],512),[[r["D"],x.selectedResultsPerPage]])])]),Object(r["i"])("div",m,[Object(r["i"])("div",null,"Page "+Object(r["B"])(x.currentPage+1)+" of "+Object(r["B"])(R.totalPages),1),Object(r["i"])("div",null," Showing "+Object(r["B"])(x.currentPage*x.selectedResultsPerPage+1)+" to "+Object(r["B"])(x.currentPage*x.selectedResultsPerPage+100*x.selectedResultsPerPage/100)+" results ",1),Object(r["i"])("div",null,"Total results: "+Object(r["B"])(x.members.length),1)]),Object(r["i"])("div",b,[Object(r["i"])("button",{class:"btn-standard btn-default-medium btn-gradient-dark",onClick:t[2]||(t[2]=function(){return R.openModal("addMember",{})})},[h,f])]),Object(r["i"])("div",O,[Object(r["i"])("h3",g,[x.members.length||"loading"===x.state?Object(r["f"])("",!0):(Object(r["r"])(),Object(r["e"])("span",j," No members yet "))]),x.members.length?(Object(r["r"])(),Object(r["e"])(D,{key:0,headings:x.headings,data:x.usersToShow,"is-row-sortable":"","is-row-searchable":"",queries:x.queries,actions:x.rowActions,"sort-by":x.sortBy,"onUpdate:sort-by":t[3]||(t[3]=function(e){return x.sortBy=e})},{cell:n((function(e){var t=e.data,a=e.heading;return["avatar"==x.headings[a].key?(Object(r["r"])(),Object(r["e"])("span",p,[Object(r["i"])(A,{user:t,isBordered:""},null,8,["user"])])):"registered"==x.headings[a].key?(Object(r["r"])(),Object(r["e"])("span",y,Object(r["B"])(x.format(t[x.headings[a].key],"dd.LL.yyyy")),1)):(Object(r["r"])(),Object(r["e"])("span",v,Object(r["B"])(t[x.headings[a].key]),1))]})),_:1},8,["headings","data","queries","actions","sort-by"])):Object(r["f"])("",!0),Object(r["i"])("div",M,[x.members.length&&0==R.filteredMembers.length&&"loading"!==x.state?(Object(r["r"])(),Object(r["e"])("h4",P," No search results. Change search query and try again ")):Object(r["f"])("",!0)]),Object(r["i"])("div",k,[Object(r["i"])("button",{class:["pageBtn",{disabled:0==x.currentPage}],disabled:0==x.currentPage,onClick:t[4]||(t[4]=function(){return R.handlePreviousPage.apply(R,arguments)})},[w,Object(r["i"])("span",S,Object(r["B"])(x.currentPage),1)],10,["disabled"]),Object(r["i"])("button",C,[Object(r["i"])("span",B,Object(r["B"])(x.currentPage+1),1),T]),Object(r["i"])("button",{class:["pageBtn",{disabled:R.disabledNextButton}],disabled:R.disabledNextButton,onClick:t[5]||(t[5]=function(){return R.handleNextPage.apply(R,arguments)})},[_,Object(r["i"])("span",q,Object(r["B"])(x.currentPage+2),1)],10,["disabled"])]),"hidden"!=x.modalState?(Object(r["r"])(),Object(r["e"])(U,{key:1,onClose:R.closeModal},Object(r["g"])({header:n((function(){return[Object(r["h"])(Object(r["B"])(R.modalTitle),1)]})),_:2},["loading"==x.modalState?{name:"loader",fn:n((function(){return[Object(r["i"])(L,{class:"sectionOnly"})]}))}:void 0,"removeMember"===x.activeModal.name?{name:"content",fn:n((function(){return[Object(r["i"])(V,{"confirm-question":"Do you really want to delete member: ".concat(x.selectedMember.fullname," ?"),"button-text":"Yes",onAccept:t[6]||(t[6]=function(e){return R.deleteMember(x.selectedMember.id)}),onClose:t[7]||(t[7]=function(e){return x.modalState="hidden"})},null,8,["confirm-question"])]}))}:"addMember"===x.activeModal.name?{name:"content",fn:n((function(){return[Object(r["i"])(I,{"initial-values":x.selectedMember,onClose:R.closeModal,onSubmit:t[8]||(t[8]=function(e){return R.addMember(e)})},null,8,["initial-values","onClose"])]}))}:void 0]),1032,["onClose"])):Object(r["f"])("",!0),"removed"==x.toastState?(Object(r["r"])(),Object(r["e"])(z,{key:2,title:"Member has been removed from list!",onClose:t[9]||(t[9]=function(e){return x.toastState="hidden"})})):Object(r["f"])("",!0),"created"==x.toastState?(Object(r["r"])(),Object(r["e"])(z,{key:3,title:"Mocked member has been added to the table at "+x.updateDate,onClose:t[10]||(t[10]=function(e){return x.toastState="hidden"})},null,8,["title"])):Object(r["f"])("",!0),"error"==x.toastState?(Object(r["r"])(),Object(r["e"])(z,{key:4,error:"",title:"Something went wrong! Please try again",onClose:t[11]||(t[11]=function(e){return x.toastState="hidden"})})):Object(r["f"])("",!0),"errorMessage"==x.toastState?(Object(r["r"])(),Object(r["e"])(z,{key:5,error:"",title:x.error.error,onClose:t[12]||(t[12]=function(e){return x.toastState="hidden"})},null,8,["title"])):Object(r["f"])("",!0)])])])])})),x=(a("4de4"),a("7db0"),a("c975"),a("d81d"),a("fb6a"),a("a9e3"),a("d3b7"),a("25f0"),a("498a"),a("5530")),R=a("31d1"),F=a("8d08"),L=a("a820"),A=a("5f07"),D=a("a82e"),V=a("3405"),I=a("eda7"),U={class:"Members__customSelect"},z=Object(r["i"])("label",{for:"gender-select"},"Gender*",-1),E={class:"Members__customSelect"},J=Object(r["i"])("label",{for:"country-select"},"Nationalization code *",-1),H=Object(r["i"])("div",{class:"Members__formInfo"},"* required field",-1),$={class:"Members__formBtns"};function G(e,t,a,n,s,i){var o=Object(r["z"])("text-field");return Object(r["r"])(),Object(r["e"])("form",{class:"Members__form",onSubmit:t[11]||(t[11]=Object(r["L"])((function(e){return i.submitForm()}),["prevent"]))},[Object(r["i"])("div",null,[Object(r["i"])(o,{value:s.firstName,"onUpdate:value":t[1]||(t[1]=function(e){return s.firstName=e}),name:s.firstName,label:"Name *",class:{error:s.error}},null,8,["value","name","class"]),Object(r["i"])(o,{value:s.lastName,"onUpdate:value":t[2]||(t[2]=function(e){return s.lastName=e}),name:s.lastName,label:"LastName *",class:{error:s.error}},null,8,["value","name","class"]),Object(r["i"])("div",U,[z,Object(r["J"])(Object(r["i"])("select",{id:"gender-select",name:"gender","onUpdate:modelValue":t[3]||(t[3]=function(e){return s.gender=e})},[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(s.options,(function(e,t){return Object(r["r"])(),Object(r["e"])("option",{key:"option-"+t},Object(r["B"])(e),1)})),128))],512),[[r["D"],s.gender]])]),Object(r["i"])(o,{value:s.age,"onUpdate:value":t[4]||(t[4]=function(e){return s.age=e}),valueModifiers:{number:!0},name:s.age,label:"Age*",type:"number",min:18,max:120,class:{error:s.error}},null,8,["value","name","class"]),Object(r["i"])("div",E,[J,Object(r["J"])(Object(r["i"])("select",{id:"country-select",name:"country","onUpdate:modelValue":t[5]||(t[5]=function(e){return s.country=e})},[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(s.nationalidades,(function(e,t){return Object(r["r"])(),Object(r["e"])("option",{key:"option-"+t},Object(r["B"])(e),1)})),128))],512),[[r["D"],s.country]])]),Object(r["i"])(o,{value:s.email,"onUpdate:value":t[6]||(t[6]=function(e){return s.email=e}),name:s.email,label:"Email *",error:i.isFieldFilled(s.email)&&!i.emailValid(s.email),errorMessage:"Invalid email",class:{error:s.error||i.isFieldFilled(s.email)&&!i.emailValid(s.email)}},null,8,["value","name","error","class"]),Object(r["i"])(o,{value:s.phone,"onUpdate:value":t[7]||(t[7]=function(e){return s.phone=e}),valueModifiers:{number:!0},name:s.phone,label:"Phone",type:"number",placeholder:"eg.111111111",min:0,error:i.isFieldFilled(s.phone)&&!i.phoneValid(s.phone),class:{error:s.error||i.isFieldFilled(s.phone)&&!i.phoneValid(s.phone)},errorMessage:"Invalid phone"},null,8,["value","name","error","class"]),Object(r["i"])(o,{value:s.photo,"onUpdate:value":t[8]||(t[8]=function(e){return s.photo=e}),name:s.photo,label:"Photo url",class:{error:s.error}},null,8,["value","name","class"]),H]),Object(r["i"])("div",$,[Object(r["i"])("button",{type:"button",class:"btn-default-medium btn-standard btn-secondary",onClick:t[9]||(t[9]=function(t){return e.$emit("close")})}," Cancel "),Object(r["i"])("button",{disabled:!i.formValid,class:"btn-default-medium btn-standard btn-primary-dark",onClick:t[10]||(t[10]=Object(r["L"])((function(){return i.submitForm.apply(i,arguments)}),["prevent"]))}," Create ",8,["disabled"])])],32)}a("4160"),a("b64b"),a("159b");var K=a("4aa6"),Y=a("0deb"),Z=a("517f"),Q=["AU","BR","CA","CH","DE","DK","ES","FI","FR","GB","IE","IR","NO","NL","NZ","TR","US"],W={name:"MemberForm",components:{TextField:Y["a"]},props:{readOnly:{type:Boolean,default:!1}},emits:["close","submit"],data:function(){return{firstName:"",lastName:"",gender:"",birthDate:new Date,country:"",age:"",email:"",phone:"",photo:"",state:"form",error:null,isEmpty:K["a"],options:["male","female"],nationalidades:Q}},computed:{formValid:function(){return Boolean(this.firstName&&this.lastName&&this.country&&this.gender&&this.age&&this.email&&this.emailChecked&&(!this.isFieldFilled(this.phone)||this.isFieldFilled(this.phone)&&this.phoneValid(this.phone)))},emailChecked:function(){return this.emailValid(this.email)},phoneChecked:function(){return this.phoneValid(this.phone)}},methods:{isFieldFilled:function(e){return Boolean(void 0!==e&&!Object(K["a"])(e))},emailValid:function(e){return Boolean(Object(Z["a"])(e))},phoneValid:function(e){return Boolean(Object(Z["b"])(e))},submitForm:function(){var e={name:this.firstName,surname:this.lastName,country:this.country,gender:this.gender,email:this.email,phone:this.phone,age:this.age,avatar:this.photo,registered:new Date};Object.keys(e).forEach((function(t){return""===e[t]&&delete e[t]})),this.$emit("submit",e)}}};a("f01f");W.render=G;var X=W,ee=a("bc3a"),te=a.n(ee),ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return te.a.get("https://randomuser.me/api/?results=".concat(e))},re=a("b166"),ne=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="",a="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},se={name:"Members",components:{Navbar:R["a"],Loader:F["a"],Table:L["a"],Avatar:A["a"],Modal:D["a"],Confirm:V["a"],Toast:I["a"],MemberForm:X},data:function(){var e=this;return{state:null,error:null,format:re["a"],modalState:"hidden",members:[],queryFullname:"",queryCountry:"",queryAge:"",queryEmail:"",queryPhone:"",selectedMember:{},activeModal:{},toastState:"hidden",updateDate:Object(re["a"])(new Date,"dd LLLL yyyy"),numberOfMembers:100,currentPage:0,selectedResultsPerPage:100,itemsPerPage:[10,20,50,100,500,4e3],usersToShow:[],headings:[{key:"avatar",name:"Photo",isRowSortable:!1},{key:"id",name:"Id",isRowSortable:!0},{key:"fullname",name:"Fullname",isRowSortable:!0},{key:"country",name:"Country",isRowSortable:!0},{key:"age",name:"Age",isRowSortable:!0},{key:"registered",name:"Joined",isRowSortable:!0},{key:"email",name:"Email",isRowSortable:!0},{key:"phone",name:"Phone",isRowSortable:!0},{key:"actions",name:"Actions",isRowSortable:!1}],sortBy:{key:"id",direction:"asc"},rowActions:[{name:"edit",icon:"fas fa-info-circle",fn:function(t){return e.$router.push({name:"Member",params:Object(x["a"])({},t)})}},{name:"delete",icon:"far fa-trash-alt",class:"btn-secondary-dark",fn:function(t){return e.openModal("removeMember",t)}}],queries:[{key:"avatar",searchable:!1},{key:"id",searchable:!1},{key:"fullname",searchText:this.queryFullname,placeholder:"search fullname",searchable:!0},{key:"country",searchText:this.queryCountry,placeholder:"search country",searchable:!0},{key:"age",searchText:this.queryAge,placeholder:"search age",searchable:!0},{key:"registered",searchable:!1},{key:"email",searchText:this.queryEmail,placeholder:"search email",searchable:!0},{key:"phone",searchText:this.queryPhone,placeholder:"search phone no",searchable:!0},{key:"actions",searchable:!1}]}},computed:{sortedMembers:function(){var e=this,t=this.members.slice().sort((function(t,a){switch(e.sortBy.key){case"id":return t.id.trim().localeCompare(a.id.trim());case"fullname":return t.fullname.trim().localeCompare(a.fullname.trim());case"country":return t.country.trim().localeCompare(a.country.trim());case"age":return t.age-a.age;case"registered":return new Date(t.registered)-new Date(a.registered);case"email":return t.email.localeCompare(a.email);case"phone":return t.phone.trim().localeCompare(a.phone.trim());default:return 0}}));return"asc"==this.sortBy.direction?t:"desc"==this.sortBy.direction?t.slice().reverse():this.members},filteredMembers:function(){var e,t=this.queries.find((function(e){return"fullname"==e.key})).searchText||"",a=this.queries.find((function(e){return"country"==e.key})).searchText||"",r=this.queries.find((function(e){return"age"==e.key})).searchText||"",n=this.queries.find((function(e){return"email"==e.key})).searchText||"",s=this.queries.find((function(e){return"phone"==e.key})).searchText||"",i=r||t||n||s||a;return e=i?this.sortedMembers.filter((function(e){return e.fullname&&-1!==e.fullname.toLowerCase().indexOf(t.toLowerCase())})).filter((function(e){return e.country&&-1!==e.country.toLowerCase().indexOf(a.toLowerCase())})).filter((function(e){return e.age&&-1!==e.age.toString().indexOf(r)})).filter((function(e){return e.email&&-1!==e.email.toLowerCase().indexOf(n.toLowerCase())})).filter((function(e){return e.phone&&-1!==e.phone.indexOf(s)})):this.sortedMembers,e},modalTitle:function(){switch(this.activeModal.name){case"addMember":return"Add member";case"removeMember":return"Delete member";default:return""}},generateApiTokenBasedId:function(){var e=ne()+"-"+ne(4)+"-"+ne(4)+"-"+ne(4)+"-"+ne(12);return e.toString()},totalPages:function(){var e=Math.ceil(this.numberOfMembers/this.selectedResultsPerPage);return e},disabledNextButton:function(){var e=this.filteredMembers.length!==this.members.length,t=this.usersToShow.length==this.members.length&&this.members.length==this.selectedResultsPerPage,a=this.currentPage+1,r=this.totalPages,n=t?this.usersToShow.length<=this.selectedResultsPerPage:a==r;return!!e||n}},mounted:function(){this.getMembers()},watch:{selectedResultsPerPage:function(e){this.usersToShow=this.members.slice(0,e),this.currentPage=0,this.filteredMembers=this.members,this.queryFullname="",this.queryCountry="",this.queryAge="",this.queryEmail="",this.queryPhone=""},filteredMembers:function(e){this.usersToShow=e}},methods:{getMembers:function(){var e=this;return this.state="loading",ae(this.numberOfMembers).then((function(t){var a=t.data.results;e.members=a.map((function(e){return{id:e.login.uuid,name:e.name.first,surname:e.name.last,fullname:e.name.title+" "+e.name.first+" "+e.name.last,country:e.nat,email:e.email,phone:e.phone,gender:e.gender,age:e.dob.age,avatar:e.picture.thumbnail,registered:new Date(e.registered.date),street:e.location.street&&e.location.street.name?e.location.street.name+" "+e.location.street.number:e.location.street,city:e.location.city,postcode:e.location.postcode,title:e.name.title,username:e.login.username}})),e.usersToShow=e.members,e.state="loaded"})).catch((function(t){e.state="error",console.log("error",t)}))},closeModal:function(){this.modalState="hidden"},openModal:function(e,t){this.modalState="visible",this.activeModal={name:e,member:t},this.selectedMember=t},deleteMember:function(){var e=this;this.modalState="loading",setTimeout((function(){e.modalState="hidden",e.toastState="removed",e.members=e.members.filter((function(t){return t.id!==e.selectedMember.id}))}),500)},addMember:function(e){var t=this;this.modalState="loading";var a=Object(x["a"])(Object(x["a"])({},e),{},{id:this.generateApiTokenBasedId,fullname:e.name+" "+e.surname});this.updateDate=Object(re["a"])(new Date(e.registered),"dd LLLL yyyy HH:mm"),setTimeout((function(){t.modalState="hidden",t.toastState="created",t.members.push(a)}),500)},handlePreviousPage:function(){this.state="loading";var e=Number(this.selectedResultsPerPage),t=this.currentPage*e+1,a=t-1,r=a+1-e;this.usersToShow=this.members.slice(r-1,a),this.currentPage--,window.scroll({top:0,left:0,behavior:"smooth"}),this.state="loaded"},handleNextPage:function(){this.state="loading";var e=Number(this.selectedResultsPerPage),t=this.currentPage*e+1,a=t+e-1,r=a+1,n=r+e-1;this.usersToShow=this.members.slice(r-1,n),this.currentPage++,window.scroll({top:0,left:0,behavior:"smooth"}),this.state="loaded"}}};a("b75d");se.render=N,se.__scopeId="data-v-2449f703";t["default"]=se},f01f:function(e,t,a){"use strict";a("48be")}}]);
//# sourceMappingURL=members.a9f5123e.js.map